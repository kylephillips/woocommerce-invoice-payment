(WooInvoicePayment=WooInvoicePayment||{}).Checkout=function(){var o=this,t=jQuery;return o.selectors={paymentMethodRadio:'input[name="payment_method"]'},o.bindEvents=function(){t(document).ready(function(){"1"===woocommerce_invoice_payment.hide_billing_fields&&(o.toggleBillingTerms(),setTimeout(function(){o.updateSessionPaymentMethod()},50))}),t(document).on("payment_method_selected",function(){o.toggleBillingTerms(),setTimeout(function(){o.updateSessionPaymentMethod()},50)}),t(document).on("change",o.selectors.paymentMethodRadio,function(){o.toggleBillingTerms(),setTimeout(function(){o.updateSessionPaymentMethod()},50)})},o.toggleTaxSubtotal=function(){var e=t(o.selectors.paymentMethodRadio+":checked").val();void 0!==e&&""!==e&&("invoice"==e&&woocommerce_invoice_payment.hide_tax_subtotal?(t(".tax-total").hide(),t(".tax-rate").hide()):(t(".tax-total").show(),t(".tax-rate").show()))},o.toggleBillingTerms=function(){var e;"1"!==woocommerce_invoice_payment.hide_billing_fields?o.toggleBillingFields(!1):void 0!==(e=t(o.selectors.paymentMethodRadio+":checked").val())&&""!==e&&("invoice"!==e?o.toggleBillingFields(!1):o.toggleBillingFields(!0))},o.updateSessionPaymentMethod=function(){var e=t(o.selectors.paymentMethodRadio+":checked").val();void 0!==e&&""!==e&&t.ajax({url:woocommerce_invoice_payment.ajaxurl,type:"post",datatype:"json",data:{action:"update_session_payment_method",nonce:woocommerce_invoice_payment.nonce,payment_method:e},success:function(e){"1"===woocommerce_invoice_payment.hide_billing_fields&&(t(o.selectors.paymentMethodRadio+":checked").val(),"invoice"!==e.data.new_payment_method&&e.data.billing_fields,o.populateBillingFields(e.data.billing_fields),o.toggleBillingFields(e.data.hide_billing),o.toggleTaxSubtotal(),setTimeout(function(){t(document.body).trigger("country_to_state_changed")},50))},error:function(e){console.log(e)}})},o.populateBillingFields=function(e){t(".woocommerce-billing-fields__field-wrapper").html(e)},o.toggleBillingFields=function(e){var o=t(".woocommerce-billing-fields").find(".form-row, .address-book-selection").not("#billing_first_name_field").not("#billing_last_name_field").not("#billing_email_field"),i=t("#ship-to-different-address");e?(t(".woocommerce-checkout").addClass("billing-fields-hidden"),t(o).hide(),t(i).hide()):(t(".woocommerce-checkout").removeClass("billing-fields-hidden"),t(o).show(),t(i).show()),t(document).trigger("woocommerce-invoice-payment-billing-fields-toggled",[e])},o.bindEvents()};var WooInvoicePayment=WooInvoicePayment||{};jQuery(document).ready(function(){new WooInvoicePayment.Factory}),WooInvoicePayment.Factory=function(){jQuery;return this.build=function(){new WooInvoicePayment.Checkout},this.build()};