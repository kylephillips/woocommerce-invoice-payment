(WooInvoicePaymentAdmin=WooInvoicePaymentAdmin||{}).RepeaterField=function(){var t=this,r=jQuery;return t.selectors={wrapper:".woocommerce-invoice-payment-repeater-wrapper",table:".woocommerce-invoice-payment-repeater",row:".woocommerce-invoice-payment-repeater-row",addNewButton:"data-woocommerce-invoice-payment-repeater-add-new",removeButton:".woocommerce-invoice-payment-repeater-remove-row a"},t.bindEvents=function(){r(document).ready(function(){t.enableSortable()}),r(document).on("click","["+t.selectors.addNewButton+"]",function(e){e.preventDefault(),t.addNew(r(this))}),r(document).on("click",t.selectors.removeButton,function(e){e.preventDefault(),t.removeRow(r(this))})},t.addNew=function(e){var i=r(e).attr(t.selectors.addNewButton),n=null,o=("shipping_option"===i&&(n=woocommerce_invoice_payment.shipping_options_fields),"override_billing_fields"===i&&(n=woocommerce_invoice_payment.override_billing_fields),r(e).siblings(t.selectors.wrapper));r(o).find(t.selectors.table).append(n),setTimeout(function(){t.reindexInputs(o)},50)},t.removeRow=function(e){r(e).parents(t.selectors.row).remove();var i=r(e).parents(t.selectors.wrapper);setTimeout(function(){t.reindexInputs(i)},50)},t.reindexInputs=function(e){e=r(e).siblings("["+t.selectors.addNewButton+"]").attr(t.selectors.addNewButton);"shipping_option"===e?t.reindexShippingOptions():"override_billing_fields"===e&&t.reindexOverrideBillingFields()},t.reindexShippingOptions=function(){var e=r("["+t.selectors.addNewButton+'="shipping_option"]').siblings(t.selectors.wrapper),i=r(e).find(t.selectors.row),o=/woocommerce_invoice_shipping_options\[\d\]/;r.each(i,function(e){var i=e,e=r(this).find("input"),n=r(this).find("select");r.each(e,function(){var e=r(this).attr("name");r(this).attr("name",e.replace(o,"woocommerce_invoice_shipping_options["+i+"]"))}),r.each(n,function(){var e=r(this).attr("name");r(this).attr("name",e.replace(o,"woocommerce_invoice_shipping_options["+i+"]"))})}),r(e).find(".woocommerce-invoice-payment-repeater").sortable("refresh")},t.reindexOverrideBillingFields=function(){var e=r("["+t.selectors.addNewButton+'="override_billing_fields"]').siblings(t.selectors.wrapper),i=r(e).find(t.selectors.row),o=/woocommerce_invoice_override_billing_meta\[\d\]/;r.each(i,function(e){var i=e,e=r(this).find("input"),n=r(this).find("select");r.each(e,function(){var e=r(this).attr("name");r(this).attr("name",e.replace(o,"woocommerce_invoice_override_billing_meta["+i+"]"))}),r.each(n,function(){var e=r(this).attr("name");r(this).attr("name",e.replace(o,"woocommerce_invoice_override_billing_meta["+i+"]"))})}),r(e).find(".woocommerce-invoice-payment-repeater").sortable("refresh")},t.enableSortable=function(){r(".woocommerce-invoice-payment-repeater").sortable({handle:".order",start:function(e,i){i.placeholder.height(i.item.height())},stop:function(e,i){setTimeout(function(){var e=r(i.item).parents(t.selectors.wrapper);t.reindexInputs(e)},100)}})},t.bindEvents()};(WooInvoicePaymentAdmin=WooInvoicePaymentAdmin||{}).Settings=function(){var e=this,i=jQuery;return e.bindEvents=function(){i(document).ready(function(){e.toggleTaxDependentFields(),e.toggleShippingDependentFields(),e.toggleCustomEmailField(),e.toggleCustomNameFields()}),i(document).on("change",'input[name="woocommerce_invoice_disable_taxes"]',function(){e.toggleTaxDependentFields()}),i(document).on("change",'input[name="woocommerce_invoice_disable_shipping"]',function(){e.toggleShippingDependentFields()}),i(document).on("change",'input[name="woocommerce_invoice_disable_email_field"]',function(){e.toggleCustomEmailField()}),i(document).on("change",'input[name="woocommerce_invoice_disable_name_fields"]',function(){e.toggleCustomNameFields()})},e.toggleTaxDependentFields=function(){i('input[name="woocommerce_invoice_disable_taxes"]').is(":checked")?i(".tax-disabled-totals-message").parents("tr").show():i(".tax-disabled-totals-message").parents("tr").hide()},e.toggleShippingDependentFields=function(){i('input[name="woocommerce_invoice_disable_shipping"]').is(":checked")?i(".shipping-disabled-message").parents("tr").show():i(".shipping-disabled-message").parents("tr").hide()},e.toggleCustomEmailField=function(){i('input[name="woocommerce_invoice_disable_email_field"]').is(":checked")?i(".disable-email-field").parents("tr").show():i(".disable-email-field").parents("tr").hide()},e.toggleCustomNameFields=function(){i('input[name="woocommerce_invoice_disable_name_fields"]').is(":checked")?i(".disable-name-fields").parents("tr").show():i(".disable-name-fields").parents("tr").hide()},e.bindEvents()};var WooInvoicePaymentAdmin=WooInvoicePaymentAdmin||{};jQuery(document).ready(function(){new WooInvoicePaymentAdmin.Factory}),WooInvoicePaymentAdmin.Factory=function(){var e=this,i=jQuery;return e.build=function(){new WooInvoicePaymentAdmin.Settings,new WooInvoicePaymentAdmin.RepeaterField,e.initializeSelectWoo()},e.initializeSelectWoo=function(){i(".invoice-payment-select-woo").length<1||i(".invoice-payment-select-woo").select2({multiple:!0})},e.build()};